// Bundle Activator interface
public interface BundleContext{
    public class start(BundleContext);
    public class stop(BundleContext);
}

// Activator implementation
public class Activator(){
    private ServiceRegistration serviceRegistration;
    public void start(BundleContext c){
        SimpleService service = new SimpleServiceImpl();
        // Service Registration
        this.serviceRegistration = c.registerService(SimpleService.class.getName(),service,null);
    }
    public void stop(BundleContext c){
        // Unregister Service
        if( this.serviceRegistration != null){
            this.serviceRegistration.unregister();
        }

    }
}

//BundleContext instance
BundleContext c;

// Install new bundle
Bundle bundle = c.installBundle("file:///home/simplebundle.jar");

// Get bundle id
long id = bundle.getBundleId();

// Get bundle using id
Bundle bundle = c.getBundle(id);

// Get state "etat"
int etatBundle = bundle.getState(),

// Start bundle
bundle.start();

// Get bundle services
ServiceReference[] serviceReferences = bundle.getRegisteredServices();

// Stop Bundle
bundle.stop();


// Interface Bundle Listener

// Add Bundle listener
BundleListener observateurs = new BundleListener(){
    public void bundlechanged(BundleEvent event){
        Bundle bundle = event.getBundle();
        int etat = event.getState();
        ...
    }
}
c.addBundleListener(observateurs);

// Interface Bundle Listener
public interface BundleListener{
    public void bundleChanged(BundleEvent event);
}

BundleListener obs = new BundleListener(){
        public void bundleChanged(BundleEvent event){
            ...
        }
}

c.addBundleListener(obs);
